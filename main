#include <stdio.h>
#include <conio.h>
#include <string.h>
#define true 1


/*
PPS Innovative Examination
Shashank Singh 9
Shivanshu Singh 10
Utsav Raj Singh 11
Utsav Anand Singh 12
COMP C
*/

//-----------------------------------------------------------------------------

// Creating an array of size equal to 100

extern int arry[10][4];

//-----------------------------------------------------------------------------

//Declaring all functions used in the program

int Data();
int Fund_Transfer();
int beneficiary(int bnf,int bnf2);
int Verification();
int main();

//-----------------------------------------------------------------------------

int Data()	//store initialized records of user
{
	/*
	Account number, pin, beneficiary account number, amount.
	The array will store these data of the user in the respective order.
	We are inserting some datas in the array
	*/
 
	//User 1
	arry[0][0] =123456789;
	arry[0][1] =5698;
	arry[0][2] =00000;
	arry[0][3] =1000000;

	//User 2
	arry[1][0] = 987654321;
	arry[1][1] = 4326;
	arry[1][2] = 11111;
	arry[1][3] = 1000000;
}
//-----------------------------------------------------------------------------

int Fund_Transfer()	//Fund Transfer function
{
	int bnf,bnf2;

	printf("\nPlease enter 5 digit beneficiary account number:");
	scanf("%d",&bnf);
	printf("Please re-enter 5 digit beneficiary account number:");
	scanf("%d",&bnf2);
	beneficiary(bnf,bnf2);		
}

int beneficiary(int bnf,int bnf2) 	/*Beneficiary Account Number function	

function to check if beneficiary account number are matching or not*/

{
	int amount,j,k;

	if (bnf == bnf2)
	{
		for (j=0;j<=100;j++)
		{
			printf("\nPlease enter the amount: Rs.");
			scanf("%d",&amount);
			printf("\nPlease wait,");
			printf("\nYour transaction is being processed...");
			printf("\n");
		
			arry[j][3] = arry[j][3] - amount; //amount from sender's account will be deducted
		
			if (arry[j][3] > 0)
			{
				printf("\nThe bank shall transfer the amount to the");
				printf("\naccount number quoted by you. The bank shall");
				printf("\nnot be responsible for any incorrect amount");
				printf("\nor incorrect account number quoted by you");
				printf("\n");
		
				for (k=0;k<=100;k++)	
				{
					if (bnf==arry[k][2])
					{
						arry[k][3] = arry[k][3] + amount;	//receiver's account will be updated
					}
					
					break;
				}
				
				printf("\nYour transaction was successful.");
				printf("\nSorry, unable to print receipt.");
			}
			
			else	//error message
			{
				printf("\n");
				printf("\nInsufficient funds!");
				printf("\nTransaction fails!");
				
				Fund_Transfer();
			}
		}
	}

	else
	{
	printf("\nIncorrect!");
	Fund_Transfer();
	}
}

//-----------------------------------------------------------------------------

int Verification()	//Use to verify wheather the user is authorized or not
{
	int acn,pin,j;
	
	printf("\nEnter your Account Number:");
	scanf("%d",&acn);
	
	for (j=0;j<=100;j++)
	{
		if (acn==arry[j][0])
		{
			printf("\nEnter your PIN:");
			scanf("%d",&pin);
			return true;
		}
		
		else	//error message
		{
			printf("Incorrect Pin!");
			Verification();
		}
	}
	
}

//-----------------------------------------------------------------------------

int main()		//Main function
{
	int choice;
	
	printf("\n");
	printf("\nATM");
	printf("\n");
	printf("\n1.Change of PIN");
	printf("\n2.Balance Enquiry");
	printf("\n3.Money Withdrawal");
	printf("\n4.Fund Transfer");
	printf("\n5.Exit");
	printf("\n");
	printf("\nSelect a service:");
	scanf("%d",&choice);

	switch (choice)
	{
		case 1:
			//Change of PIN will execute
			Verification();
			break;

		case 2:
			//Balance Enquiry function will execute
			Verification();
			break;

		case 3:
			//Money Withdrawal function will execute
			Verification();
			break;

		case 4:
			//Fund Transfer function will execute
			Verification();
			Fund_Transfer();
			break;

		case 5:
			//Exit
			printf("\nThank you for choosing <name_of_bank>");
			break;	
	}
}

//-----------------------------------------------------------------------------
